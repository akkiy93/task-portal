# 日報記入欄の振り返り項目の再設計

## 概要

日報記入欄の「今日の振り返り」欄を廃止し、目的達成（上司共有、MBO成果提出）のために再設計された5つの手動記入項目に置き換えます。また、日付フィールドの初期値を当日に修正します。

## 変更内容

### 1. 日付の修正
- **問題**: 日付が前日の日付になっている
- **修正**: 当日の日付に変更（タイムゾーン対応）

### 2. 「今日の振り返り」欄の廃止
- 既存の大きなテキストエリア「今日の振り返り」を削除

### 3. 新規振り返り項目の追加（5項目）

「今日完了したタスク」と「明日の予定（任意）」の間に、以下の新しいセクションを挿入してください。

| # | 項目名 | 必須/任意 | 入力欄タイプ | プレースホルダーの例 | 意図 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **1** | **目標に対する進捗・成果** | **必須** | テキストエリア (中) | 今日取り組んだ目標に対し、具体的な成果や進捗率（例: 80%完了）を記入してください。 | MBO面談用。目標達成への具体的な寄与度を定量的に記録させる。 |
| **2** | **課題・ボトルネック** | **必須** | テキストエリア (中) | 目標達成やタスク完了を妨げた具体的な問題点や、つまずいた要因を記入してください。 | 上司共有用。問題の早期発見と介入依頼の明確化。 |
| **3** | **対策・改善アクション** | **必須** | テキストエリア (中) | 課題に対して、明日以降に取る具体的な解決策や改善行動を記入してください。 | 主体性を示す。課題とセットで解決策まで提示させる。 |
| **4** | **他者への依頼・連携事項** | **任意** | テキストエリア (小) | 自分の業務を進める上で、上司、同僚、他部署に依頼・確認が必要な事項を記入してください。 | 上司共有用。連携漏れ防止と記録。 |
| **5** | **業務上の気づき・学び** | **任意** | テキストエリア (小) | 新しい知見、効率化のヒント、業務を通じて得た学びを自由に記入してください。 | MBO面談用。自己成長や内省の記録。 |

### 4. 「明日の予定（任意）」の維持
- 「明日の予定（任意）」はそのまま維持し、新しい振り返り項目の下部に配置（合計6項目）

## 技術的な実装

### バックエンド（Code.gs）

#### 日報項目の変更
- `recordDailyReport()` 関数: 新しい振り返り項目5つを処理
- 新しい日報シートの列構造:
  - 「振り返り」列は含めない（旧シートのみ）
  - 以下の列を追加:
    1. 「目標に対する進捗・成果」（必須）
    2. 「課題・ボトルネック」（必須）
    3. 「対策・改善アクション」（必須）
    4. 「他者への依頼・連携事項」（任意）
    5. 「業務上の気づき・学び」（任意）
  - 「明日の予定」列は維持

#### 定数の更新
- 日報シートの列インデックス定数を更新:
  - `REPORT_COL_PROGRESS`: 目標に対する進捗・成果（新規、必須）
  - `REPORT_COL_CHALLENGES`: 課題・ボトルネック（新規、必須）
  - `REPORT_COL_ACTIONS`: 対策・改善アクション（新規、必須）
  - `REPORT_COL_REQUESTS`: 他者への依頼・連携事項（新規、任意）
  - `REPORT_COL_LEARNINGS`: 業務上の気づき・学び（新規、任意）
  - `REPORT_COL_TOMORROW_PLAN`: 明日の予定（維持）

### フロントエンド（index.html）

#### 日報記入欄
- **日付フィールドの修正**:
  - 日付フィールドの初期値を当日に修正（タイムゾーン対応）
  - `window.onload` 内の日付設定ロジックを確認・修正

- **「今日の振り返り」の削除**:
  - `id="report-reflection"` のテキストエリアを削除
  - 関連するJavaScriptコードを削除

- **新しい5つの振り返り項目を追加**:
  - 項目1-3: テキストエリア（中サイズ、5-7行程度）
  - 項目4-5: テキストエリア（小サイズ、3-4行程度）
  - 各項目に適切なIDとname属性を設定

- **「明日の予定（任意）」の維持**:
  - 既存の「明日の予定」テキストエリアを維持
  - 新しい項目の下部に配置

- **バリデーションの追加**:
  - 必須項目（1, 2, 3）のバリデーションを追加
  - フォーム送信時に必須項目が未入力の場合、エラーメッセージを表示

#### CSS スタイリング
- 新しい振り返り項目のスタイルを追加
- 必須項目のラベルに「*」マークを追加
- テキストエリアのサイズ（中/小）を視覚的に区別

## データ構造

### 新しい日報シートの列（振り返り項目関連）

...（体調関連の列はIssue #11で定義）
7. 完了タスク数合計
8. 完了タスク時間合計
9. 目標に対する進捗・成果（新規、必須）
10. 課題・ボトルネック（新規、必須）
11. 対策・改善アクション（新規、必須）
12. 他者への依頼・連携事項（新規、任意）
13. 業務上の気づき・学び（新規、任意）
14. 明日の予定
15. 記録日時

## 実装手順

1. **日付フィールドの修正**:
   - `window.onload` 内の日付設定ロジックを確認
   - タイムゾーンを考慮した当日の日付を設定

2. **「今日の振り返り」の削除**:
   - HTMLから該当テキストエリアを削除
   - JavaScriptから関連コードを削除

3. **新しい振り返り項目の追加**:
   - HTMLに5つの新しいテキストエリアを追加
   - 各項目に適切なプレースホルダーを設定

4. **バリデーションの実装**:
   - 必須項目のチェック機能を追加
   - エラーメッセージの表示機能を追加

5. **バックエンドの更新**:
   - `recordDailyReport()` 関数を更新
   - 新しい列構造に対応

## 注意事項

- Issue #10で作成された新しい日報シートを使用します
- Issue #11で定義された体調関連の列構造を前提とします
- 既存の「日報（旧）」シートには影響しません
- 必須項目（1, 2, 3）が未入力の場合、日報送信を阻止します

## 関連イシュー

- Issue #10: 日報シートの移行（前提）
- Issue #11: 体調項目の簡素化と備考欄追加（前提）

